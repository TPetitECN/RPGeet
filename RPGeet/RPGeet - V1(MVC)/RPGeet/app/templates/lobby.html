{% extends 'base.html' %}

{% block content %}
<h2>Lobby</h2>
<p>Welcome, {{ username }}!</p>

<h3>Your Games</h3>
<ul>
    {% for game in games %}
    <li>
        <a href="{{ url_for('game.view_game', game_id=game.game_id) }}">{{ game.name }}</a>
        {% if game.gamemaster %} (GM) {% else %} (Player) {% endif %}
    </li>
    {% else %}
    <li>No games found.</li>
    {% endfor %}
</ul>

<h3>Create New Game</h3>
<form action="{{ url_for('game.create_game') }}" method="get">
    <button type="submit">Create Game</button>
</form>

<h3>Join Game</h3>
<input type="number" id="game_id_input" placeholder="Game ID" required>
<button type="button" onclick="submitJoin()">Join Game</button>

<script>
function submitJoin() {
    var gameId = document.getElementById('game_id_input').value;
    if(gameId) {
        window.location.href = `/game/${gameId}/join`;
    }
}
</script>
{% endblock %}